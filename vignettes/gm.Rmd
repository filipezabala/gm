---
title: "Complete Guide to gm"
output:
  rmarkdown::html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{Complete Guide to gm}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE, message = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  
  # To prevent CRAN from building this vignette:
  # 
  # 1. Add `BUILD_VIGNETTE=TRUE` in .Renviron before calling
  # `devtools::build()` or `R CMD build`, to build this vignette locally.
  # 
  # 2. Remove `BUILD_VIGNETTE=TRUE` before calling `R CMD check --as-cran`.
  eval = Sys.getenv("BUILD_VIGNETTE") == "TRUE"
)
```


```{r message = FALSE}
library(gm)
```

There are two interpretations of the package name *gm*:

1. grammar of music
2. generate music

They correspond to two functionalities of the package:

1. a language for music representation
2. generation of music scores and audio files

Let's start with a quick example.


## Quick Example

```{r}
music <- 
  Music() +
  Meter(4, 4) +
  Line(c("C5", "D5", "E5", "F5"))
  
show(music)
```

Let's go through the code line by line:

1. `music <-` defines a variable.
2. `Music()` initializes a `Music` object.
3. `+ Meter(4, 4)` adds a 4/4 time signature.
4. `+ Line(c("C5", "D5", "E5", "F5"))` adds four notes.
5. `show(music)` generates the music.

We don’t have to stop here. We can add more components. For example, add a tempo:

```{r}
music <- music + Tempo(180)
show(music)
```

Add an articulation:

```{r}
music <- music + Articulation(">", 1)
show(music)
```

Add a pedal:

```{r}
music <- music + Pedal(1, 4)
show(music)
```

There are still many other components we can add. Before we dive in, let's see how to install and configure gm.


## Installation

Install gm:

```r
install.packages("gm")
```

Install [MuseScore](https://musescore.org/). MuseScore is open source
and free notation software.


## Configuration

You don’t need to configure anything if MuseScore is installed to a [default path](https://musescore.org/en/handbook/4/revert-factory-settings).

Otherwise, please specify the path to the MuseScore executable file in .Renviron file:

1. Open .Renviron file.
2. Add environment variable `MUSESCORE_PATH=<path to MuseScore>`.
3. Restart R session.

For example, the environment variable is like

- `MUSESCORE_PATH=C:/Program Files/MuseScore 4/bin/MuseScore4.exe` in Windows, and
- `MUSESCORE_PATH=/Applications/MuseScore\ 4.app/Contents/MacOS/mscore` in Mac.
